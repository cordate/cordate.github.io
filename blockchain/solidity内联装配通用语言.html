<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="zh-CN">
<head>
  
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222"/>






















<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0"/>

<link rel="stylesheet" href="/css/main.css?v=7.2.0"/>


  <link rel="apple-touch-icon" sizes="180x180" href="/images/icon2.jpg?v=7.2.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/icon.jpg?v=7.2.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/icon.jpg?v=7.2.0">


  <link rel="mask-icon" href="/images/logo.svg?v=7.2.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '7.2.0',
    sidebar: {"position":"left","display":"always","offset":12,"onmobile":false},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":true},
    copycode: {"enable":true,"show_result":true,"style":"mac"},
    fancybox: false,
    fastclick: false,
    lazyload: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    }
  };
</script>

  <meta name="description" content="JULIA是一种可以编译到各种不同后端的中间语言（EVM1.0，EVM 1.5和eWASM正在计划中）。正因为如此，它被设计为所有三个平台均可用。它已经可以用于Solidity内部的“内联汇编”，并且未来版本的Solidity编译器甚至将JULIA用作中间语言。为JULIA构建高级优化器阶段也应该很容易。 注意:请注意，用于“内联汇编”的风格不具有类型（所有内容均是u256类型），并且内置函数与E">
<meta name="keywords" content="solidity">
<meta property="og:type" content="article">
<meta property="og:title" content="solidity内联装配通用语言">
<meta property="og:url" content="https://cordate.github.io/blockchain/solidity内联装配通用语言.html">
<meta property="og:site_name" content="柳絮纷飞">
<meta property="og:description" content="JULIA是一种可以编译到各种不同后端的中间语言（EVM1.0，EVM 1.5和eWASM正在计划中）。正因为如此，它被设计为所有三个平台均可用。它已经可以用于Solidity内部的“内联汇编”，并且未来版本的Solidity编译器甚至将JULIA用作中间语言。为JULIA构建高级优化器阶段也应该很容易。 注意:请注意，用于“内联汇编”的风格不具有类型（所有内容均是u256类型），并且内置函数与E">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-07-21T14:14:01.161Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="solidity内联装配通用语言">
<meta name="twitter:description" content="JULIA是一种可以编译到各种不同后端的中间语言（EVM1.0，EVM 1.5和eWASM正在计划中）。正因为如此，它被设计为所有三个平台均可用。它已经可以用于Solidity内部的“内联汇编”，并且未来版本的Solidity编译器甚至将JULIA用作中间语言。为JULIA构建高级优化器阶段也应该很容易。 注意:请注意，用于“内联汇编”的风格不具有类型（所有内容均是u256类型），并且内置函数与E">



  <link rel="alternate" href="https://legacy.gitbook.com/@gavinzhang1" title="柳絮纷飞" type="application/atom+xml"/>



  
  
  <link rel="canonical" href="https://cordate.github.io/blockchain/solidity内联装配通用语言"/>



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  
  <title>solidity内联装配通用语言 | 柳絮纷飞</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">

  
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>




<nav class="site-nav navbar navbar-default sticky animated fadeInDown" role="navigation">
  
    <ul id="menu" class="menu nav navbar-nav hidden-sm">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    

    
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    

    
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    

    
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    

    
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    

    
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i>归档</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-vedio">

    

    
      
    

    <a href="/vedio/" rel="section"><i class="menu-item-icon fa fa-fw fa-film"></i>视频</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-pictures">

    

    
      
    

    <a href="/pictures/" rel="section"><i class="menu-item-icon fa fa-fw fa-picture-o"></i>图片</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> 搜索</a>
        </li>
      
    </ul>
  

  
    

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  
    <div class="reading-progress-bar"></div>
  

  
    
      
      <img src="/images/blog/solidity.jpeg" alt="背景图" width="100%"/>
    
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://cordate.github.io/blockchain/solidity内联装配通用语言.html"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Author"/>
      <meta itemprop="description" content="一个孤独的开发者，正在互联网公司踩坑<br />邮箱：zlcgavin@gmail.com"/>
      <meta itemprop="image" content="/images/user-avatar.jpg"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="柳絮纷飞"/>
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">solidity内联装配通用语言

              
            
          </h2>
        

        <div class="post-meta">

          <!-- 置顶的实现 -->
          

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-04-09 10:14:10" itemprop="dateCreated datePublished" datetime="2018-04-09T10:14:10+08:00">2018-04-09</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-07-21 22:14:01" itemprop="dateModified" datetime="2019-07-21T22:14:01+08:00">2019-07-21</time>
              </span>
            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/区块链/" itemprop="url" rel="index"><span itemprop="name">区块链</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/区块链/ethereum/" itemprop="url" rel="index"><span itemprop="name">ethereum</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/区块链/ethereum/solidity/" itemprop="url" rel="index"><span itemprop="name">solidity</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          <!-- 页面访问量统计 -->
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon"
              >
                <i class="fa fa-eye"></i>
                 阅读次数： 
                <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
              </span>
            </span>
          

          

          <br/>
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
              
                <span class="post-meta-item-text">本文字数：</span>
              
              <span title="本文字数">14k</span>
            </span>
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
              
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              
              <span title="阅读时长">13 分钟</span>
            </span>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><b style="color:red">JULIA是一种可以编译到各种不同后端的中间语言（EVM1.0，EVM 1.5和eWASM正在计划中）。正因为如此，它被设计为所有三个平台均可用。它已经可以用于Solidity内部的“内联汇编”，并且未来版本的Solidity编译器甚至将JULIA用作中间语言。为JULIA构建高级优化器阶段也应该很容易。</b></p>
<p><b style="color:#6ab0de">注意:请注意，用于“内联汇编”的风格不具有类型（所有内容均是<code>u256</code>类型），并且内置函数与EVM操作码相同。有关详细信息，请参阅内联汇编文档。</b></p>
<p>JULIA的核心组件是函数，语句块，变量，文本（literals），for循环，if语句，switch语句，表达式和变量赋值。</p>
<p>JULIA是类型化的，变量和文字（Literals）都必须用后缀表示法指定类型。支持的类型有<code>bool</code>，<code>u8</code>，<code>s8</code>，<code>u32</code>，<code>s32</code>， <code>u64</code>，<code>s64</code>，<code>u128</code>，<code>s128</code>，<code>u256</code>和<code>s256</code>。</p>
<p>JULIA本身甚至不提供操作符。如果EVM是运行目标，则操作码将以内置函数提供，但如果后端更改，则可以重新实现它们。有关强制性内置函数的列表，请参阅下面的部分。</p>
<p>下面的示例程序假定EVM操作码<code>mul</code>，<code>div</code>和<code>mod</code>可以本地或者作为函数可用并计算求幂。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    function power(base:u256, exponent:u256) -&gt; result:u256</span><br><span class="line">    &#123;</span><br><span class="line">        switch exponent</span><br><span class="line">        case 0:u256 &#123; result := 1:u256 &#125;</span><br><span class="line">        case 1:u256 &#123; result := base &#125;</span><br><span class="line">        default:</span><br><span class="line">        &#123;</span><br><span class="line">            result := power(mul(base, base), div(exponent, 2:u256))</span><br><span class="line">            switch mod(exponent, 2:u256)</span><br><span class="line">                case 1:u256 &#123; result := mul(base, result) &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>也可以使用for循环而不是递归来实现相同的函数。在这里，我们需要EVM操作码<code>lt</code>（小于）和<code>add</code>。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    function power(base:u256, exponent:u256) -&gt; result:u256</span><br><span class="line">    &#123;</span><br><span class="line">        result := 1:u256</span><br><span class="line">        for &#123; let i := 0:u256 &#125; lt(i, exponent) &#123; i := add(i, 1:u256) &#125;</span><br><span class="line">        &#123;</span><br><span class="line">            result := mul(result, base)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="JULIA规格"><a href="#JULIA规格" class="headerlink" title="JULIA规格"></a>JULIA规格</h2><p>本章介绍JULIA代码。JULIA代码通常放置在JULIA对象中，将在下一章中介绍。</p>
<p>语法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">Block = &apos;&#123;&apos; Statement* &apos;&#125;&apos;</span><br><span class="line">Statement =</span><br><span class="line">    Block |</span><br><span class="line">    FunctionDefinition |</span><br><span class="line">    VariableDeclaration |</span><br><span class="line">    Assignment |</span><br><span class="line">    Expression |</span><br><span class="line">    Switch |</span><br><span class="line">    ForLoop |</span><br><span class="line">    BreakContinue</span><br><span class="line">FunctionDefinition =</span><br><span class="line">    &apos;function&apos; Identifier &apos;(&apos; TypedIdentifierList? &apos;)&apos;</span><br><span class="line">    ( &apos;-&gt;&apos; TypedIdentifierList )? Block</span><br><span class="line">VariableDeclaration =</span><br><span class="line">    &apos;let&apos; TypedIdentifierList ( &apos;:=&apos; Expression )?</span><br><span class="line">Assignment =</span><br><span class="line">    IdentifierList &apos;:=&apos; Expression</span><br><span class="line">Expression =</span><br><span class="line">    FunctionCall | Identifier | Literal</span><br><span class="line">If =</span><br><span class="line">    &apos;if&apos; Expression Block</span><br><span class="line">Switch =</span><br><span class="line">    &apos;switch&apos; Expression Case* ( &apos;default&apos; Block )?</span><br><span class="line">Case =</span><br><span class="line">    &apos;case&apos; Literal Block</span><br><span class="line">ForLoop =</span><br><span class="line">    &apos;for&apos; Block Expression Block Block</span><br><span class="line">BreakContinue =</span><br><span class="line">    &apos;break&apos; | &apos;continue&apos;</span><br><span class="line">FunctionCall =</span><br><span class="line">    Identifier &apos;(&apos; ( Expression ( &apos;,&apos; Expression )* )? &apos;)&apos;</span><br><span class="line">Identifier = [a-zA-Z_$] [a-zA-Z_0-9]*</span><br><span class="line">IdentifierList = Identifier ( &apos;,&apos; Identifier)*</span><br><span class="line">TypeName = Identifier | BuiltinTypeName</span><br><span class="line">BuiltinTypeName = &apos;bool&apos; | [us] ( &apos;8&apos; | &apos;32&apos; | &apos;64&apos; | &apos;128&apos; | &apos;256&apos; )</span><br><span class="line">TypedIdentifierList = Identifier &apos;:&apos; TypeName ( &apos;,&apos; Identifier &apos;:&apos; TypeName )*</span><br><span class="line">Literal =</span><br><span class="line">    (NumberLiteral | StringLiteral | HexLiteral | TrueLiteral | FalseLiteral) &apos;:&apos; TypeName</span><br><span class="line">NumberLiteral = HexNumber | DecimalNumber</span><br><span class="line">HexLiteral = &apos;hex&apos; (&apos;&quot;&apos; ([0-9a-fA-F]&#123;2&#125;)* &apos;&quot;&apos; | &apos;\&apos;&apos; ([0-9a-fA-F]&#123;2&#125;)* &apos;\&apos;&apos;)</span><br><span class="line">StringLiteral = &apos;&quot;&apos; ([^&quot;\r\n\\] | &apos;\\&apos; .)* &apos;&quot;&apos;</span><br><span class="line">TrueLiteral = &apos;true&apos;</span><br><span class="line">FalseLiteral = &apos;false&apos;</span><br><span class="line">HexNumber = &apos;0x&apos; [0-9a-fA-F]+</span><br><span class="line">DecimalNumber = [0-9]+</span><br></pre></td></tr></table></figure></p>
<h3 id="对语法的限制"><a href="#对语法的限制" class="headerlink" title="对语法的限制"></a>对语法的限制</h3><p>Switches必须至少有一个case（包括默认case）。如果表达式的所有可能值都被覆盖了，那么就不应该允许使用默认情况（例如，一个带有bool表达式的开关，同时具有true和false的情况下不应允许默认情况）。</p>
<p>每个表达式都计算为零个或多个值。标识符和文字只计算一个值，函数调用计算的值等于所调用函数的返回值。</p>
<p>在变量声明和赋值中，右侧表达式（如果存在）必须计算出与左侧变量数量相等的许多值。这是唯一允许评估多个值的表达式。</p>
<p>也是语句的表达式（例如语句块级别的）必须评估为零值。</p>
<p>在所有其他情况下，表达式必须评估为恰好一个值。</p>
<p><code>continue</code>和<code>break</code>语句只能在循环体内部使用和必须在相同的函数的循环（或两者都必须在顶层）。<code>for-loop</code>的条件部分必须评估到一个值。</p>
<p>文字(Literals)不能大于他们的类型。定义的最大类型是256位宽。</p>
<h3 id="作用域规则"><a href="#作用域规则" class="headerlink" title="作用域规则"></a>作用域规则</h3><p>JULIA中的作用域与语句块相关（例外是函数和for循环，如下所述），所有声明（<code>FunctionDefinition</code>，<code>VariableDeclaration</code>）都将新标识符引入到这些作用域中。</p>
<p>标识符在其定义的语句块中（包括所有子节点和子语句块）中都可见。作为例外，for循环（第一个块）的“init”部分中定义的标识符在for循环的所有其他部分（但不在循环之外）中都是可见的。在for循环的其他部分声明的标识符遵守常规的作用域范围规则。函数的参数和返回参数在函数体中可见，并且它们的名称不能重叠。</p>
<p>变量只能在声明后引用。特别是变量不能在自己的变量声明的右边引用。函数可以在声明之前被引用（如果它们是可见的）。</p>
<p>阴影是不允许的，也就是说，即使不可访问，也不能在另一个具有相同名称的标识符可见的位置声明标识符。（也就是同名变量不能存在）</p>
<p>在函数内部，不可能访问在该函数之外声明的变量。</p>
<h3 id="形式规范"><a href="#形式规范" class="headerlink" title="形式规范"></a>形式规范</h3><p>我们通过在AST的各个节点上提供评估重载函数E来正式指定JULIA。任何函数都可能有副作用，所以E需要两个状态对象和AST节点，并返回两个新的状态对象和可变数量的其他值。这两个状态对象是全局状态对象（在EVM的上下文中是区块链的内存，存储和状态）和本地状态对象（局部变量的状态，即EVM中堆栈的一部分） 。如果AST节点是一个语句，E将返回两个状态对象和一个用于<code>break</code>和<code>continue</code>语句的“模式” 。如果AST节点是表达式，则E返回两个状态对象，并返回与表达式计算结果相同的值。</p>
<p>对于这个高层次的描述，全局状态的确切性质并没有说明。本地状态<code>L</code>是标识符<code>i</code>到值<code>v</code>的映射，表示为<code>L[i] = v</code>。</p>
<p>对于标识符<code>v</code>，让<code>$v</code>成为标识符的名称。</p>
<p>我们将使用AST节点的解构符号。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">E(G, L, &lt;&#123;St1, ..., Stn&#125;&gt;: Block) =</span><br><span class="line">    let G1, L1, mode = E(G, L, St1, ..., Stn)</span><br><span class="line">    let L2 be a restriction of L1 to the identifiers of L</span><br><span class="line">    G1, L2, mode</span><br><span class="line">E(G, L, St1, ..., Stn: Statement) =</span><br><span class="line">    if n is zero:</span><br><span class="line">        G, L, regular</span><br><span class="line">    else:</span><br><span class="line">        let G1, L1, mode = E(G, L, St1)</span><br><span class="line">        if mode is regular then</span><br><span class="line">            E(G1, L1, St2, ..., Stn)</span><br><span class="line">        otherwise</span><br><span class="line">            G1, L1, mode</span><br><span class="line">E(G, L, FunctionDefinition) =</span><br><span class="line">    G, L, regular</span><br><span class="line">E(G, L, &lt;let var1, ..., varn := rhs&gt;: VariableDeclaration) =</span><br><span class="line">    E(G, L, &lt;var1, ..., varn := rhs&gt;: Assignment)</span><br><span class="line">E(G, L, &lt;let var1, ..., varn&gt;: VariableDeclaration) =</span><br><span class="line">    let L1 be a copy of L where L1[$vari] = 0 for i = 1, ..., n</span><br><span class="line">    G, L1, regular</span><br><span class="line">E(G, L, &lt;var1, ..., varn := rhs&gt;: Assignment) =</span><br><span class="line">    let G1, L1, v1, ..., vn = E(G, L, rhs)</span><br><span class="line">    let L2 be a copy of L1 where L2[$vari] = vi for i = 1, ..., n</span><br><span class="line">    G, L2, regular</span><br><span class="line">E(G, L, &lt;for &#123; i1, ..., in &#125; condition post body&gt;: ForLoop) =</span><br><span class="line">    if n &gt;= 1:</span><br><span class="line">        let G1, L1, mode = E(G, L, i1, ..., in)</span><br><span class="line">        // mode has to be regular due to the syntactic restrictions</span><br><span class="line">        let G2, L2, mode = E(G1, L1, for &#123;&#125; condition post body)</span><br><span class="line">        // mode has to be regular due to the syntactic restrictions</span><br><span class="line">        let L3 be the restriction of L2 to only variables of L</span><br><span class="line">        G2, L3, regular</span><br><span class="line">    else:</span><br><span class="line">        let G1, L1, v = E(G, L, condition)</span><br><span class="line">        if v is false:</span><br><span class="line">            G1, L1, regular</span><br><span class="line">        else:</span><br><span class="line">            let G2, L2, mode = E(G1, L, body)</span><br><span class="line">            if mode is break:</span><br><span class="line">                G2, L2, regular</span><br><span class="line">            else:</span><br><span class="line">                G3, L3, mode = E(G2, L2, post)</span><br><span class="line">                E(G3, L3, for &#123;&#125; condition post body)</span><br><span class="line">E(G, L, break: BreakContinue) =</span><br><span class="line">    G, L, break</span><br><span class="line">E(G, L, continue: BreakContinue) =</span><br><span class="line">    G, L, continue</span><br><span class="line">E(G, L, &lt;if condition body&gt;: If) =</span><br><span class="line">    let G0, L0, v = E(G, L, condition)</span><br><span class="line">    if v is true:</span><br><span class="line">        E(G0, L0, body)</span><br><span class="line">    else:</span><br><span class="line">        G0, L0, regular</span><br><span class="line">E(G, L, &lt;switch condition case l1:t1 st1 ... case ln:tn stn&gt;: Switch) =</span><br><span class="line">    E(G, L, switch condition case l1:t1 st1 ... case ln:tn stn default &#123;&#125;)</span><br><span class="line">E(G, L, &lt;switch condition case l1:t1 st1 ... case ln:tn stn default st&apos;&gt;: Switch) =</span><br><span class="line">    let G0, L0, v = E(G, L, condition)</span><br><span class="line">    // i = 1 .. n</span><br><span class="line">    // Evaluate literals, context doesn&apos;t matter</span><br><span class="line">    let _, _, v1 = E(G0, L0, l1)</span><br><span class="line">    ...</span><br><span class="line">    let _, _, vn = E(G0, L0, ln)</span><br><span class="line">    if there exists smallest i such that vi = v:</span><br><span class="line">        E(G0, L0, sti)</span><br><span class="line">    else:</span><br><span class="line">        E(G0, L0, st&apos;)</span><br><span class="line"></span><br><span class="line">E(G, L, &lt;name&gt;: Identifier) =</span><br><span class="line">    G, L, L[$name]</span><br><span class="line">E(G, L, &lt;fname(arg1, ..., argn)&gt;: FunctionCall) =</span><br><span class="line">    G1, L1, vn = E(G, L, argn)</span><br><span class="line">    ...</span><br><span class="line">    G(n-1), L(n-1), v2 = E(G(n-2), L(n-2), arg2)</span><br><span class="line">    Gn, Ln, v1 = E(G(n-1), L(n-1), arg1)</span><br><span class="line">    Let &lt;function fname (param1, ..., paramn) -&gt; ret1, ..., retm block&gt;</span><br><span class="line">    be the function of name $fname visible at the point of the call.</span><br><span class="line">    Let L&apos; be a new local state such that</span><br><span class="line">    L&apos;[$parami] = vi and L&apos;[$reti] = 0 for all i.</span><br><span class="line">    Let G&apos;&apos;, L&apos;&apos;, mode = E(Gn, L&apos;, block)</span><br><span class="line">    G&apos;&apos;, Ln, L&apos;&apos;[$ret1], ..., L&apos;&apos;[$retm]</span><br><span class="line">E(G, L, l: HexLiteral) = G, L, hexString(l),</span><br><span class="line">    where hexString decodes l from hex and left-aligns it into 32 bytes</span><br><span class="line">E(G, L, l: StringLiteral) = G, L, utf8EncodeLeftAligned(l),</span><br><span class="line">    where utf8EncodeLeftAligned performs a utf8 encoding of l</span><br><span class="line">    and aligns it left into 32 bytes</span><br><span class="line">E(G, L, n: HexNumber) = G, L, hex(n)</span><br><span class="line">    where hex is the hexadecimal decoding function</span><br><span class="line">E(G, L, n: DecimalNumber) = G, L, dec(n),</span><br><span class="line">    where dec is the decimal decoding function</span><br></pre></td></tr></table></figure></p>
<h3 id="类型转换函数"><a href="#类型转换函数" class="headerlink" title="类型转换函数"></a>类型转换函数</h3><p>JULIA不支持隐式类型转换，因此存在提供显式转换的函数。在将较大类型转换为较短类型时，如果发生溢出，则可能会发生运行时异常。</p>
<p>以下类型转换功能必须可用： -<code>u32tobool(x:u32) -&gt; y:bool</code> -<code>booltou32(x:bool) -&gt; y:u32</code> -<code>u32tou64(x:u32) -&gt; y:u64</code> -<code>u64tou32(x:u64) -&gt; y:u32</code> - 等（TBD）.</p>
<h3 id="低级函数"><a href="#低级函数" class="headerlink" title="低级函数"></a>低级函数</h3><p>以下函数必须可用：</p>
<table>
<thead>
<tr>
<th>算术</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>addu256(x:u256, y:u256) -&gt; z:u256</td>
<td>x + y</td>
</tr>
<tr>
<td>subu256(x:u256, y:u256) -&gt; z:u256</td>
<td>x - y</td>
</tr>
<tr>
<td>mulu256(x:u256, y:u256) -&gt; z:u256</td>
<td>x * y</td>
</tr>
<tr>
<td>divu256(x:u256, y:u256) -&gt; z:u256</td>
<td>x / y</td>
</tr>
<tr>
<td>divs256(x:s256, y:s256) -&gt; z:s256</td>
<td>x / y，用于补码中的有符号数</td>
</tr>
<tr>
<td>modu256(x:u256, y:u256) -&gt; z:u256</td>
<td>x % y</td>
</tr>
<tr>
<td>mods256(x:s256, y:s256) -&gt; z:s256</td>
<td>x % y，用于补码中的有符号数</td>
</tr>
<tr>
<td>signextendu256(i:u256, x:u256) -&gt; z:u256</td>
<td>符号从最低有效位（i * 8 + 7）位开始计数</td>
</tr>
<tr>
<td>expu256(x:u256, y:u256) -&gt; z:u256</td>
<td>x对y的幂</td>
</tr>
<tr>
<td>addmodu256(x:u256, y:u256, m:u256) -&gt; z:u256</td>
<td>(x + y)％m，任意精确算术</td>
</tr>
<tr>
<td>mulmodu256(x:u256, y:u256, m:u256) -&gt; z:u256</td>
<td>（x * y）％m,任意精确算术</td>
</tr>
<tr>
<td>ltu256(x:u256, y:u256) -&gt; z:bool</td>
<td>如果x &lt;y,1，否则为0</td>
</tr>
<tr>
<td>gtu256(x:u256, y:u256) -&gt; z:bool</td>
<td>如果x&gt;y，1,否则为0</td>
</tr>
<tr>
<td>sltu256(x:s256, y:s256) -&gt; z:bool</td>
<td>如果x&lt;y，则为1，否则为0，用于补码中的有符号数</td>
</tr>
<tr>
<td>sgtu256(x:s256, y:s256) -&gt; z:bool</td>
<td>如果x&gt;y,1，否则为0，否则为2的补码中的有符号数</td>
</tr>
<tr>
<td>equ256(x:u256, y:u256) -&gt; z:bool</td>
<td>如果x == y,1，否则为0</td>
</tr>
<tr>
<td>notu256(x:u256) -&gt; z:u256</td>
<td>〜x，x的每一位取反</td>
</tr>
<tr>
<td>andu256(x:u256, y:u256) -&gt; z:u256</td>
<td>x和y按位与</td>
</tr>
<tr>
<td>oru256(x:u256, y:u256) -&gt; z:u256</td>
<td>x和y按位或</td>
</tr>
<tr>
<td>xoru256(x:u256, y:u256) -&gt; z:u256</td>
<td>x和y的按位异或</td>
</tr>
<tr>
<td>shlu256(x:u256, y:u256) -&gt; z:u256</td>
<td>x以y的逻辑左移</td>
</tr>
<tr>
<td>shru256(x:u256, y:u256) -&gt; z:u256</td>
<td>x，y的逻辑右移</td>
</tr>
<tr>
<td>saru256(x:u256, y:u256) -&gt; z:u256</td>
<td>x以y的算术右移</td>
</tr>
<tr>
<td>byte(n:u256, x:u256) -&gt; v:u256</td>
<td>x的第n个字节，其中最重要的字节是第0个字节不能用and256（shr256（n，x），0xff替换它）并让它由EVM后端进行优化？</td>
</tr>
<tr>
<td>内存和存储</td>
<td></td>
</tr>
<tr>
<td>mload(p:u256) -&gt; v:u256</td>
<td>mem[p..(p+32))</td>
</tr>
<tr>
<td>mstore(p:u256, v:u256)</td>
<td>mem[p..(p+32)) := v</td>
</tr>
<tr>
<td>mstore8(p:u256, v:u256)</td>
<td>mem[p] := v &amp; 0xff - 仅修改单个字节</td>
</tr>
<tr>
<td>sload(p:u256) -&gt; v:u256</td>
<td>storage[p]</td>
</tr>
<tr>
<td>sstore(p:u256, v:u256)</td>
<td>storage[p] := v</td>
</tr>
<tr>
<td>msize() -&gt; size:u256</td>
<td>内存大小，即最大访问内存索引，虽然是由于内存扩展功能（由字扩展）造成的，但它总是32个字节的倍数</td>
</tr>
<tr>
<td>执行控制</td>
<td></td>
</tr>
<tr>
<td>create(v:u256, p:u256, s:u256)</td>
<td>用代码mem [p ..（p + s））创建新的合同并发送v wei并返回新的地址</td>
</tr>
<tr>
<td>call(g:u256, a:u256, v:u256, in:u256, insize:u256, out:u256, outsize:u256) -&gt; r:u256</td>
<td>在输入mem [in ..（in + insize））时提供g gas和v wei以及输出区mem [out ..（out + oversize）），在地址a处调用合同，并在错误时返回0（例如， 1成功</td>
</tr>
<tr>
<td>callcode(g:u256, a:u256, v:u256, in:u256, insize:u256, out:u256, outsize:u256) -&gt; r:u256</td>
<td>相同call但只能使用a的代码，否则保留在当前合同的上下文中</td>
</tr>
<tr>
<td>delegatecall(g:u256, a:u256, in:u256, insize:u256, out:u256, outsize:u256) -&gt; r:u256</td>
<td>相同callcode，但也保持caller 和callvalue</td>
</tr>
<tr>
<td>atop()</td>
<td>停止执行，与返回相同（0,0）也许它会有意义的退休，因为它等于return（0,0）。它可以是EVM后端的优化。</td>
</tr>
<tr>
<td>abort()</td>
<td>中止（相当于EVM上的无效指令）</td>
</tr>
<tr>
<td>return(p:u256, s:u256)</td>
<td>结束执行，返回数据mem [p ..（p + s））</td>
</tr>
<tr>
<td>revert(p:u256, s:u256)</td>
<td>结束执行，恢复状态更改，返回数据mem [p ..（p + s））</td>
</tr>
<tr>
<td>selfdestruct(a:u256)</td>
<td>终止执行，摧毁当前合同并将资金发送给</td>
</tr>
<tr>
<td>log0(p:u256, s:u256)</td>
<td>没有主题和数据记录[p ..（p + s））</td>
</tr>
<tr>
<td>log1(p:u256, s:u256, t1:u256)</td>
<td>记录主题t1和数据mem [p ..（p + s））</td>
</tr>
<tr>
<td>log2(p:u256, s:u256, t1:u256, t2:u256)</td>
<td>记录主题t1，t2和数据mem [p ..（p + s））</td>
</tr>
<tr>
<td>log3(p:u256, s:u256, t1:u256, t2:u256, t3:u256)</td>
<td>记录主题t，t2，t3和数据mem [p ..（p + s））</td>
</tr>
<tr>
<td>log4(p:u256, s:u256, t1:u256, t2:u256, t3:u256, t4:u256)</td>
<td>记录主题t1，t2，t3，t4和数据mem [p ..（p + s））</td>
</tr>
<tr>
<td>状态查询</td>
<td></td>
</tr>
<tr>
<td>blockcoinbase() -&gt; address:u256</td>
<td>目前的采矿受益者</td>
</tr>
<tr>
<td>blockdifficulty() -&gt; difficulty:u256</td>
<td>当前块的难度</td>
</tr>
<tr>
<td>blockgaslimit() -&gt; limit:u256</td>
<td>阻止当前块的气体限制</td>
</tr>
<tr>
<td>blockhash(b:u256) -&gt; hash:u256</td>
<td>块nr b的散列值 - 仅适用于不包括当前值的最后256个块</td>
</tr>
<tr>
<td>blocknumber() -&gt; block:u256</td>
<td>当前程序段号</td>
</tr>
<tr>
<td>blocktimestamp() -&gt; timestamp:u256</td>
<td>当前块的时间戳，以秒为单位</td>
</tr>
<tr>
<td>txorigin() -&gt; address:u256</td>
<td>交易发件人</td>
</tr>
<tr>
<td>txgasprice() -&gt; price:u256</td>
<td>交易的天然气价格</td>
</tr>
<tr>
<td>gasleft() -&gt; gas:u256</td>
<td>仍然可以用于执行的gas</td>
</tr>
<tr>
<td>balance(a:u256) -&gt; v:u256</td>
<td>地址a的余额（wei）</td>
</tr>
<tr>
<td>this() -&gt; address:u256</td>
<td>当前合同/执行上下文的地址</td>
</tr>
<tr>
<td>caller() -&gt; address:u256</td>
<td>呼叫发送者（不包括委托呼叫）</td>
</tr>
<tr>
<td>callvalue() -&gt; v:u256</td>
<td>目前的调用一起发送的以太币</td>
</tr>
<tr>
<td>calldataload(p:u256) -&gt; v:u256</td>
<td>从位置p开始的调用数据（32字节）</td>
</tr>
<tr>
<td>calldatasize() -&gt; v:u256</td>
<td>通话数据的大小以字节为单位</td>
</tr>
<tr>
<td>calldatacopy(t:u256, f:u256, s:u256)</td>
<td>从位置f的calldata复制s个字节到位置t的mem</td>
</tr>
<tr>
<td>codesize() -&gt; size:u256</td>
<td>当前合同/执行上下文的代码大小</td>
</tr>
<tr>
<td>codecopy(t:u256, f:u256, s:u256)</td>
<td>从位置f的代码复制s字节到位置t的mem</td>
</tr>
<tr>
<td>extcodesize(a:u256) -&gt; size:u256</td>
<td>地址a处代码的大小</td>
</tr>
<tr>
<td>extcodecopy(a:u256, t:u256, f:u256, s:u256)</td>
<td>像代码复制（t，f，s），但需要在地址a处进行编码</td>
</tr>
<tr>
<td>其他</td>
<td></td>
</tr>
<tr>
<td>discardu256(unused:u256)</td>
<td>丢弃价值</td>
</tr>
<tr>
<td>splitu256tou64(x:u256) -&gt; (x1:u64, x2:u64,x3:u64, x4:u64)</td>
<td>将u256分成四个u64</td>
</tr>
<tr>
<td>combineu64tou256(x1:u64, x2:u64, x3:u64,x4:u64) -&gt; (x:u256)</td>
<td>将四个U64组合成一个U256</td>
</tr>
<tr>
<td>sha3(p:u256, s:u256) -&gt; v:u256</td>
<td>keccak（MEM [P …（P + S）））</td>
</tr>
</tbody>
</table>
<p>以上的表格内容都是机翻，由于之前在solidity的内联汇编中都有类似的指令，大概进行翻译，这里有时间的话会进行相应的处理。</p>
<h3 id="后端"><a href="#后端" class="headerlink" title="后端"></a>后端</h3><p>后端或目标是JULIA到特定字节码的翻译。每个后端都可以暴露以后端名称为前缀的函数。我们为两个建议的后端预留<code>evm_</code>并加上<code>ewasm_</code>前缀。</p>
<h3 id="后端：EVM"><a href="#后端：EVM" class="headerlink" title="后端：EVM"></a>后端：EVM</h3><p>EVM目标将具有以<code>evm_</code>前缀暴露的所有底层EVM操作码。</p>
<h3 id="后端：“EVM-1-5”"><a href="#后端：“EVM-1-5”" class="headerlink" title="后端：“EVM 1.5”"></a>后端：“EVM 1.5”</h3><p>TBD</p>
<h3 id="后端：eWASM"><a href="#后端：eWASM" class="headerlink" title="后端：eWASM"></a>后端：eWASM</h3><p>TBD</p>
<h2 id="JULIA对象的规范"><a href="#JULIA对象的规范" class="headerlink" title="JULIA对象的规范"></a>JULIA对象的规范</h2><p>语法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">TopLevelObject = &apos;object&apos; &apos;&#123;&apos; Code? ( Object | Data )* &apos;&#125;&apos;</span><br><span class="line">Object = &apos;object&apos; StringLiteral &apos;&#123;&apos; Code? ( Object | Data )* &apos;&#125;&apos;</span><br><span class="line">Code = &apos;code&apos; Block</span><br><span class="line">Data = &apos;data&apos; StringLiteral HexLiteral</span><br><span class="line">HexLiteral = &apos;hex&apos; (&apos;&quot;&apos; ([0-9a-fA-F]&#123;2&#125;)* &apos;&quot;&apos; | &apos;\&apos;&apos; ([0-9a-fA-F]&#123;2&#125;)* &apos;\&apos;&apos;)</span><br><span class="line">StringLiteral = &apos;&quot;&apos; ([^&quot;\r\n\\] | &apos;\\&apos; .)* &apos;&quot;&apos;</span><br></pre></td></tr></table></figure></p>
<p>以上<code>Block</code>是指<code>Block</code>前一章中介绍的JULIA代码语法。</p>
<p>JULIA对象示例如下所示：</p>
<p>..代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">// Code consists of a single object. A single &quot;code&quot; node is the code of the object.</span><br><span class="line">// Every (other) named object or data section is serialized and</span><br><span class="line">// made accessible to the special built-in functions datacopy / dataoffset / datasize</span><br><span class="line">object &#123;</span><br><span class="line">    code &#123;</span><br><span class="line">        let size = datasize(&quot;runtime&quot;)</span><br><span class="line">        let offset = allocate(size)</span><br><span class="line">        // This will turn into a memory-&gt;memory copy for eWASM and</span><br><span class="line">        // a codecopy for EVM</span><br><span class="line">        datacopy(dataoffset(&quot;runtime&quot;), offset, size)</span><br><span class="line">        // this is a constructor and the runtime code is returned</span><br><span class="line">        return(offset, size)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    data &quot;Table2&quot; hex&quot;4123&quot;</span><br><span class="line"></span><br><span class="line">    object &quot;runtime&quot; &#123;</span><br><span class="line">        code &#123;</span><br><span class="line">            // runtime code</span><br><span class="line"></span><br><span class="line">            let size = datasize(&quot;Contract2&quot;)</span><br><span class="line">            let offset = allocate(size)</span><br><span class="line">            // This will turn into a memory-&gt;memory copy for eWASM and</span><br><span class="line">            // a codecopy for EVM</span><br><span class="line">            datacopy(dataoffset(&quot;Contract2&quot;), offset, size)</span><br><span class="line">            // constructor parameter is a single number 0x1234</span><br><span class="line">            mstore(add(offset, size), 0x1234)</span><br><span class="line">            create(offset, add(size, 32))</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // Embedded object. Use case is that the outside is a factory contract,</span><br><span class="line">        // and Contract2 is the code to be created by the factory</span><br><span class="line">        object &quot;Contract2&quot; &#123;</span><br><span class="line">            code &#123;</span><br><span class="line">                // code here ...</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            object &quot;runtime&quot; &#123;</span><br><span class="line">                code &#123;</span><br><span class="line">                    // code here ...</span><br><span class="line">                &#125;</span><br><span class="line">             &#125;</span><br><span class="line"></span><br><span class="line">             data &quot;Table1&quot; hex&quot;4123&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>

    

    
      
    

    
    
    

    

    
      
    
    

    
      <div>
        




  



<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>Gavin Zhang</li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    
    <a href="https://cordate.github.io/blockchain/solidity内联装配通用语言.html" title="solidity内联装配通用语言">https://cordate.github.io/blockchain/solidity内联装配通用语言.html</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li>
</ul>

      </div>
    

    <footer class="post-footer">
      
        
          
        
        <div class="post-tags">
          
            <a href="/tags/solidity/" rel="tag"><i class="fa fa-tag"></i> solidity</a>
          
        </div>
      

      
      
        <div class="post-widgets">
        

        

        
          
          <div class="social_share">
            
              <div>
                

<script src="//cdn.jsdelivr.net/npm/ilyabirman-likely@2/release/likely.js"></script>



<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/ilyabirman-likely@2/release/likely.css">


  


<div class="likely">
  
    <div class="twitter">Tweet</div>
  
    <div class="facebook">Share</div>
  
    <div class="linkedin">Link</div>
  
    <div class="gplus">Plus</div>
  
    <div class="vkontakte">Share</div>
  
    <div class="odnoklassniki">Class</div>
  
    <div class="telegram">Send</div>
  
    <div class="whatsapp">Send</div>
  
    <div class="pinterest">Pin</div>
  
</div>

              </div>
            
            
          </div>
        
        </div>
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/blockchain/solidity编码风格.html" rel="next" title="solidity编码风格">
                <i class="fa fa-chevron-left"></i> solidity编码风格
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/blockchain/truffle指南.html" rel="prev" title="truffle指南">
                truffle指南 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div class="comments" id="gitalk-container">
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">

          <!-- 左侧菜单--站点概览 -->
<div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  
    <img class="site-author-image" itemprop="image"
      src="/images/user-avatar.jpg"
      alt="Gavin Zhang"/>
  
  <p class="site-author-name" itemprop="name">Gavin Zhang</p>
  <div class="site-description motion-element" itemprop="description">一个孤独的开发者，正在互联网公司踩坑<br />邮箱：zlcgavin@gmail.com</div>
</div>

<!-- 下方的分类标签 -->

  <nav class="site-state motion-element">
    
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">127</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
    

    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">33</span>
        <span class="site-state-item-name">分类</span>
        </a>
      </div>
    

    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">114</span>
        <span class="site-state-item-name">标签</span>
        </a>
      </div>
    
  </nav>


<!-- rss -->

  <div class="feed-link motion-element">
    <a href="https://legacy.gitbook.com/@gavinzhang1" rel="alternate">
      <i class="fa fa-rss"></i>RSS
    </a>
  </div>





  <div class="links-of-author motion-element">
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3lvdXJuYW1l" title="GitHub &rarr; https://github.com/yourname"><i class="fa fa-fw fa-github"></i>GitHub</span>
      </span>
    
  </div>



  <div class="cc-license motion-element" itemprop="license">
  
  
    
  
  
  
    <span class="exturl cc-opacity" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"/></span>
  </div>





          
          
        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#JULIA规格"><span class="nav-number">1.</span> <span class="nav-text">JULIA规格</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#对语法的限制"><span class="nav-number">1.1.</span> <span class="nav-text">对语法的限制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#作用域规则"><span class="nav-number">1.2.</span> <span class="nav-text">作用域规则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#形式规范"><span class="nav-number">1.3.</span> <span class="nav-text">形式规范</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类型转换函数"><span class="nav-number">1.4.</span> <span class="nav-text">类型转换函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#低级函数"><span class="nav-number">1.5.</span> <span class="nav-text">低级函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#后端"><span class="nav-number">1.6.</span> <span class="nav-text">后端</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#后端：EVM"><span class="nav-number">1.7.</span> <span class="nav-text">后端：EVM</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#后端：“EVM-1-5”"><span class="nav-number">1.8.</span> <span class="nav-text">后端：“EVM 1.5”</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#后端：eWASM"><span class="nav-number">1.9.</span> <span class="nav-text">后端：eWASM</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JULIA对象的规范"><span class="nav-number">2.</span> <span class="nav-text">JULIA对象的规范</span></a></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019-09-09</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Gavin Zhang</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">站点总字数：</span>
    
    <span title="站点总字数">883k</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    
    <span title="站点阅读时长">13:23</span>
  
</div>









        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="总访客量">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="post-meta-divider">|</span>
  

  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="总访问量">
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

    
      <div>
        <!-- add this第三方工具 -->
<div class="addthis_inline_share_toolbox">
  <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5d2f5e89bbcb7cce" async="async"></script>
</div>

      </div>
    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>








  



  
  





  
    
    
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest.min.js"></script>







  



  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>

  
  <script src="/lib/lazyload/lozad.min.js?v=1.10.0"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script src="/lib/reading_progress/reading_progress.js"></script>




  <script src="/js/utils.js?v=7.2.0"></script>

  <script src="/js/motion.js?v=7.2.0"></script>



  
  


  <script src="/js/schemes/muse.js?v=7.2.0"></script>



  
  <script src="/js/scrollspy.js?v=7.2.0"></script>
<script src="/js/post-details.js?v=7.2.0"></script>



  <script src="/js/next-boot.js?v=7.2.0"></script>

  

  
  <script src="/js/exturl.js?v=7.2.0"></script>


  

  

  


  
    

<script src="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>



<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css"/>



<script src="//cdn.jsdelivr.net/npm/js-md5@0.7.3/src/md5.min.js"></script>

<script>
  var gitalk = new Gitalk({
    clientID: '9ed54522a8818f2ebf63',
    clientSecret: '2977df7ea417b2b266949482dce578d39d7a2df6',
    repo: 'cordate.github.io',
    owner: 'cordate',
    admin: ['cordate'],
    id: md5(location.pathname),
    
      language: 'zh-CN',
    
    distractionFreeMode: 'true'
  });
  gitalk.render('gitalk-container');
</script>

  


  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
  

  
  

  


  

  
<script>
if ($('body').find('pre.mermaid').length) {
  $.ajax({
    type: 'GET',
    url: '//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js',
    dataType: 'script',
    cache: true,
    success: function() {
      mermaid.initialize({
        theme: 'forest',
        logLevel: 3,
        flowchart: { curve: 'linear' },
        gantt: { axisFormat: '%m/%d/%Y' },
        sequence: { actorMargin: 50 }
      });
    }
  });
}
</script>


  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>


  

  

  

  

  

  

  


  

</body>
</html>
